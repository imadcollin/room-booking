<link rel="import" href="../../assets/libs/polymer/polymer.html">

<dom-module id="ape-rooms">

    <template>

        <style>
             :host {
                display: flex;
                flex-direction: column;
                padding: 1.6rem;
            }
        </style>

        <h2>Hello</h2>
        <div>Avaliable room
            <li>room 1 </li>
            <li>room 2 </li>
            <li>room 3</li>
            <li>room 3</li>
            <li>room 4 </li>

        </div>
        <div>Booked rooms
            <li>room 1</li>
            <li>room 3</li>
            <li>room 5</li>

        </div>
        <div>Employees at meeting with rooms number and time
            <li>Bob meet Alice from <b>13:00</b> to <b>14:30</b></li>
            <li>Eva meet Nour from <b>15:00</b> to <b>16:30</b></li>
        </div>
        <div>Booking Area Please selec avaliable room for booking "DropDownList" <br>
            <button type="button">Book </button>
        </div>
        <!--Fetch the rooms -->
        <h2>Room from firebase </h2>
        <template is="dom-repeat" items="[[roomsData]]" as="room">
            Room No:[[room.number]] Room Capacity:[[room.capacity]] <br>
        </template>

        <!--fetch the employees -->
        <h2>Employees</h2>
        Employees at the Office :
        <template is="dom-repeat" items="[[employees]]" as="employee">
            [[employee.name]]
        </template>

        <!--conditional repeat where the room is avialable  -->
        <template is="dom-if" items="[[roomsData]]" as="room" if="{{room.available}}">
            No:[[room.number]] Capacity:[[room.capacity]] booked:[[room.available]]
        </template>

    </template>

    <script>
        Polymer({

            is: `ape-rooms`,

            behaviors: [

            ],

            properties: {
                roomsData: {
                    type: Array,
                    value: () => []
                },
                roomsRef: {
                    type: Object,
                    value: () => null
                },
                available: {
                    type: Boolean,
                },
                employees: {
                    type: Object,
                    value: function () {
                        return [{ name: `Bob` }, { name: `Alice` }, { name: `Eva` }];
                    }
                }

            },

            /* Life cycle */

            ready() {

            },

            attached() {
                this.roomsRef = firebase.database().ref(`/rooms`);
                this.roomsRef.on(`value`, (data) => {
                    const items = data.val();
                    this.roomsData = Object.keys(items).map(key => items[key]);
                    console.log(`the data `, this.roomsData);
                });
            },

            detached() {

            },


        });
    </script>

</dom-module>