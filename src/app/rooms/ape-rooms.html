<link rel="import" href="../../assets/libs/polymer/polymer.html">

<dom-module id="ape-rooms">

    <template>

        <style>
             :host {
                display: flex;
                flex-direction: column;
                padding: 1.6rem;
            }
        </style>

        <h2>Hello</h2>
        <div>Avaliable room
            <!--Fetch the rooms -->
            <template is="dom-repeat" items="[[roomsData]]" as="room">
                <li> Room No:[[room.number]] Capacity:[[room.capacity]] <br>
                </li>
            </template>
        </div>

        <!--conditional repeat where the room is avialable  -->
        <div>Booked rooms
            <template is="dom-repeat" items="[[roomsData]]" as="room">

                <template is="dom-if" if="{{!room.available}}">

                    <li> No:[[room.number]] Capacity:[[room.capacity]] booked:[[room.available]]</li>
                </template>
        </div>


        <div>Employees at meeting with rooms number and time
            <li>Bob meet Alice from <b>13:00</b> to <b>14:30</b></li>
            <li>Eva meet Nour from <b>15:00</b> to <b>16:30</b></li>
        </div>
        <div>Booking Area Please selec avaliable room for booking "DropDownList" <br>
            <button type="button">Book </button>
        </div>

        <!--fetch the employees -->
        <h2>Employees</h2>
        Employees at the Office :
        <template is="dom-repeat" items="[[employeesData]]" as="employee">
            [[employee.name]]
        </template>
        <button type="button" on-tap="test"></button>

        </template>

        <script>
            Polymer({

                is: `ape-rooms`,

                behaviors: [

                ],

                properties: {
                    roomsData: {
                        type: Array,
                        value: () => []
                    },

                    available: {
                        type: Boolean,
                    },
                    employeesData: {
                        type: Array,
                        observer: `empolyeeStatus`,
                        notify: true
                    },
                    employeesAtMeeting: {
                        type: Array,
                        observer: `employeesAtMeetingStatus`
                    }

                },

                /* Life cycle */

                ready() {

                },

                attached() {

                },

                detached() {

                },
                empolyeeStatus(newEmployees) {
                    let employeesAtMeeting = [];

                    if (newEmployees !== null && newEmployees !== undefined) {

                        for (let i = 0; i < newEmployees.length; i++) {
                            //If some condtiions make new array for meeting
                            employeesAtMeeting.push(newEmployees[i]); //Push all employees for now
                        }
                        this.employeesAtMeeting = employeesAtMeeting;
                    }
                },
                test: function () {
                    let t = localStorage.getItem(`collector`);
                    console.log(`here the test`, JSON.parse(t));
                }


            });
        </script>

</dom-module>